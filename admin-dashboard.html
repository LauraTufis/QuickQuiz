<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8" />
  <title>Admin Dashboard</title>
  <link rel="stylesheet" href="app.css" />
  <link rel="stylesheet" href="admin-nav.css" />
</head>
<body>
  <nav class="admin-nav">
    <a href="/admin-dashboard.html">ğŸ  Dashboard</a>
    <a href="/admin-questions.html">â“ ÃntrebÄƒri</a>
    <a href="/admin-users.html">ğŸ‘¥ Utilizatori</a>
    <a href="/admin-stats.html">ğŸ“Š Statistici</a>
    <button id="logoutBtn">Logout</button>
  </nav>

  <main class="container flex-center flex-column text-center">
    <h1>Salut, Admin!</h1>
    <h2 id="questionCount">ÃncÄƒrcare...</h2>
    <a href="/add-question.html" class="btn" style="margin-top: 3rem;">â• AdaugÄƒ Ã®ntrebare nouÄƒ</a>
  </main>

  <script>
    // Verificare dacÄƒ e logat È™i e admin
    const user = JSON.parse(localStorage.getItem("loggedUser"));
    if (!user || user.role !== "admin") {
      alert("Acces interzis.");
      window.location.href = "/login.html";
    }

    // AfiÈ™are numÄƒr Ã®ntrebÄƒri
    const questionCountElement = document.getElementById("questionCount");

    fetch("http://localhost:3000/questions/count")
      .then(res => res.json())
      .then(data => {
        questionCountElement.innerText = `NumÄƒr total de Ã®ntrebÄƒri: ${data.count}`;
      })
      .catch(err => {
        console.error("Eroare la Ã®ncÄƒrcarea numÄƒrului de Ã®ntrebÄƒri:", err);
        questionCountElement.innerText = "Nu s-a putut Ã®ncÄƒrca numÄƒrul de Ã®ntrebÄƒri.";
      });

    // Logout
    document.getElementById("logoutBtn").addEventListener("click", () => {
      localStorage.removeItem("loggedUser");
      window.location.href = "/index.html";
    });
  </script>
</body>
</html>
